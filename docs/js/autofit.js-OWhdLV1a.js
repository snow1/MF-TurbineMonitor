/**
 * @name: autofit.js
 * @author: Larry Zhu
 * @version: 3.2.8
 * @description: autofit.js 是迄今为止最易用的自适应工具
 * @license: MIT
 */let S=null,g="",w="",x="",b=null,M=null,o=1,d=!1;const z={isAutofitRunning:!1,init(t={},l=!0){l&&console.log("autofit.js is running");const{dw:n=1920,dh:s=1080,el:i=typeof t=="string"?t:"body",resize:c=!0,ignore:u=[],transition:m="none",delay:$=0,limit:y=.1,cssMode:f="scale",allowScroll:p=!1}=t;S=i;const e=document.querySelector(i);if(!e){console.error(`autofit: '${i}' is not exist`);return}const r=document.createElement("style"),a=document.createElement("style");r.lang="text/css",a.lang="text/css",r.id="autofit-style",a.id="ignoreStyle",!p&&(r.innerHTML="body {overflow: hidden;}");const h=document.querySelector("body");h.appendChild(r),h.appendChild(a),e.style.height=`${s}px`,e.style.width=`${n}px`,e.style.transformOrigin="0 0",!p&&(e.style.overflow="hidden"),R(n,s,e,u,y,f),b=()=>{clearTimeout(M),$!=0?M=setTimeout(()=>{R(n,s,e,u,y,f),d&&v(g,x,w)},$):(R(n,s,e,u,y,f),d&&v(g,x,w))},c&&window.addEventListener("resize",b),this.isAutofitRunning=!0,setTimeout(()=>{e.style.transition=`${m}s`})},off(t="body"){try{window.removeEventListener("resize",b);const l=document.querySelector("#autofit-style");l&&l.remove();const n=document.querySelector("#ignoreStyle");n&&n.remove();const s=document.querySelector(S||t);s&&(s.style.cssText=""),d&&j()}catch(l){console.error("autofit: Failed to remove normally",l)}this.isAutofitRunning=!1,console.log("autofit.js is off")},elRectification:null,scale:o};function v(t,l=!0,n=1){if(!z.isAutofitRunning){console.error("autofit.js：(elRectification): autofit has not been initialized yet");return}j(),!t&&console.error(`autofit.js：elRectification bad selector: ${t}`),g=t,w=n,x=l;const s=Array.from(document.querySelectorAll(t));if(s.length==0){console.error(`autofit.js：elRectification found no element by selector: "${t}"`);return}for(const i of s){const c=o==1?1:Number(o)*Number(n);d||(i.originalWidth=i.clientWidth,i.originalHeight=i.clientHeight),l?(i.style.width=`${i.originalWidth*c}px`,i.style.height=`${i.originalHeight*c}px`):(i.style.width=`${100*c}%`,i.style.height=`${100*c}%`),i.style.transform=`translateZ(0) scale(${1/Number(o)})`,i.style.transformOrigin="0 0"}d=!0}function j(){if(g){d=!1;for(const t of Array.from(document.querySelectorAll(g)))t.style.width="",t.style.height="",t.style.transform=""}}function R(t,l,n,s,i,c="scale"){const u=document.documentElement.clientHeight,m=document.documentElement.clientWidth;o=m/u<t/l?m/t:u/l,o=Math.abs(1-o)>i?o:1,z.scale=+o;const $=Math.round(u/Number(o)),y=Math.round(m/Number(o));n.style.height=`${$}px`,n.style.width=`${y}px`,c==="zoom"?n.style.zoom=`${o}`:n.style.transform=`translateZ(0) scale(${o})`;const f=document.querySelector("#ignoreStyle");f.innerHTML="";for(const p of s){const e=p;let r=e.el||e.dom;if(typeof e=="string"&&(r=e),!r||typeof r=="object"&&!Object.keys(r).length){console.error(`autofit: found invalid or empty selector/object: ${r}`);continue}const a=e.scale?e.scale:1/Number(o),h=a!=o&&e.fontSize,E=a!=o&&e.width,H=a!=o&&e.height;f.innerHTML+=`
${r} { 
      transform: scale(${a})!important;
      transform-origin: 0 0;
      ${E?`width: ${E}!important;`:""}
      ${H?`height: ${H}!important;`:""}
    }`,h&&(f.innerHTML+=`
${r} div ,${r} span,${r} a,${r} * {
        font-size: ${h}px;
      }`)}}z.elRectification=v;export{z as a};
